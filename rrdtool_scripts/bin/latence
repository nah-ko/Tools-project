#!/bin/sh
# Creation graph latence

# $Id$

source ../Common
RRDFILE=../data/$HOST.latence.rrd
if [ -e $RRDFILE ]
then
    # Definitions
    DEFS="DEF:ligne5=$RRDFILE:lat-min:AVERAGE \
          DEF:ligne6=$RRDFILE:lat-max:AVERAGE"

    #----------------
    # latence sur nerim
    #----------------
    LEGENDE="millisecondes"
    GRAPHFILE=$HOST.network.latence

    for VAR in $LISTE
    do
	TITRE="Latence sur $VAR"
	GRAPH=$GRAPHDIR/$GRAPHFILE.$VAR.png
	START=e-$VAR
	# Creation du graph
	rrdtool graph $GRAPH -s $START $OPTIONS --title="$TITRE" -v "$LEGENDE" $DEFS \
	LINE2:ligne5#FF9752:"Min  \:"                                                \
	GPRINT:ligne5:LAST:"Cur=%8.2lf%sms"                                          \
	GPRINT:ligne5:AVERAGE:"Moy=%8.2lf%sms"                                       \
	GPRINT:ligne5:MAX:"Max=%8.2lf%sms\n"                                         \
	LINE2:ligne6#829BFF:"Max  \:"                                                \
	GPRINT:ligne6:LAST:"Cur=%8.2lf%sms"                                          \
	GPRINT:ligne6:AVERAGE:"Moy=%8.2lf%sms"                                       \
	GPRINT:ligne6:MAX:"Max=%8.2lf%sms\n"                                         \
	COMMENT:"$STR_DATE\c"
    done
fi
